{"componentChunkName":"component---src-components-templates-blog-post-js","path":"/what-is-same-site-attribute","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Cookies: Same Site attribute","date":"2020-09-15","tags":["cookies","chrome","firefox"]},"html":"<p>If you <a href=\"/blog/cookie\">understand how cookies on the web work</a>, you will be aware of how third party elements on a website, like ads and social media posts, are the means for big companies like google and facebook to track you.</p>\n<p>Luckily, all popular browsers have brought updates regarding the <code>same-site</code> attribute. </p>\n<p>This attribute specifes which cookies will be attached to different types of request.\nThis attribute takes 3 parameters:</p>\n<h4>1. Strict</h4>\n<p>If a cookie has <code>sameSite=strict</code> attribute, then that cookie will only be sent as a first party cookie. Meaning, if a cookie is built by <em>xyz.com</em> then that cookie will only be passed into request headers if and only if the user is on <em>xyz.com</em>.</p>\n<blockquote>\n<p><em>Note</em>: If a user visits <em>xyz.com</em> after a top level redirect from another website (<em>probably by clicking on a link</em>) then also the cookies will not be passed; hence the term <em>sameSite=<strong>strict</strong></em></p>\n</blockquote>\n<p>This is useful to avoid <a href=\"https://www.youtube.com/watch?v=vRBihr41JTo\">Cross Site Request Forgery (CSRF)</a></p>\n<h4>2. Lax</h4>\n<p>If a cookie has <code>sameSite=lax</code> attribute, then that cookie is sent on all visits to the page. This means that it is the same as <code>sameSite=strict</code> but this cookie will also be passed during a top level redirect from another site.</p>\n<h4>3. None</h4>\n<p>This property means that cookies will be passed during all sorts of requests to the site. Whether it is a third-party request, redirects or direct navigation to the site; this cookie is always sent with any request to the cookie domain.</p>\n<h2>What are the new defaults?</h2>\n<p>Before the updates for implementing this attribute, browsers followed the behaviour of <code>sameSite=none</code>. This led to many security flaws in applications relying on <a href=\"https://www.youtube.com/watch?v=Ka8vG5miErk&#x26;t=740s\">Cross Orign Resource Sharing</a> (<em>Most common of which were CSRFs</em>).</p>\n<p>After the introduction of <code>same-site</code>, all the browsers now have a default behaviour of <code>sameSite=lax</code>. But all of them, in their release, recommended to use the <code>sameSite=strict</code> property.</p>\n<h2>Was the transition smooth?</h2>\n<p>The days following this update witnessed the crash of many websites. And updates for the feature starting from Chrome 80 and Firefox 60 were quite similar, there were(<em>and still are</em>) some small differences in the implementation across these two browsers.</p>\n<h4>Chrome</h4>\n<p>This is a minor detail, but chrome still allows us to create cookies using javascript's <code>document.cookie</code> object without any kinds of warning. </p>\n<p>After creating the cookie this way, if you check the application's stored cookies we see that it does not even specify the default <code>lax</code> property, that the browser uses, in the cookie description</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/ef12d2b71c576db980a655c7e2c1c0ed/9f82e/chrome-application.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.5531914893617%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4UlEQVQY002PyXKDMBBE+f//yiWJy5hiS1hsyRLIZi1SgDm9DOSSw2he9fR0jbyu67DWsnfnHG3b8nw+D63ve4wxwgb36AhSjR/dUKaRWcfPNHF3o3iqwzcMA97+zPPMtm0sy3Lw6/ViXVfquqaq6sOo74arMpQ3g9JG9L+QpmmYJHj3jOOIV5alDC2VXJRlOWEU4yRIKcUlCMjyHK01SZJwLQtS6bloRSGcpkTitxIcx8lR3nepsY8W61q+CsXb+5lPP6SQaz7OIadLLGzR9oGSSrKrfNkJO/7v+mHKKYj5BUsxJQ3rBle3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Console-image\"\n        title=\"Console-image\"\n        src=\"/blog/static/ef12d2b71c576db980a655c7e2c1c0ed/1d69c/chrome-application.png\"\n        srcset=\"/blog/static/ef12d2b71c576db980a655c7e2c1c0ed/4dcb9/chrome-application.png 188w,\n/blog/static/ef12d2b71c576db980a655c7e2c1c0ed/5ff7e/chrome-application.png 375w,\n/blog/static/ef12d2b71c576db980a655c7e2c1c0ed/1d69c/chrome-application.png 750w,\n/blog/static/ef12d2b71c576db980a655c7e2c1c0ed/9f82e/chrome-application.png 820w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h4>Firefox</h4>\n<p>Firefox, on the other hand, had a cleaner implementation (<em>in my opinion</em>). It gave proper warnings, pointing the user at the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite\">official documentation</a> for reference and also showed the default parameter that it used for <code>SameSite</code> in the cookie description</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 684px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/d9410614ccf7c4092e1c6327e65f9f10/2c288/firefox-console.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.127659574468087%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAElEQVQY03WPXUvDQBBF8///i1AUbatF9F3EVluKYlPSfG+3TdJN0sRsjttVHwS9cLg7M8xdxtmJJQfxziHy2cklIpuzlWukIUldsr1LW284lp5xn/YYGA/QHyn5ISbLY6oqQamYskpxyvyRLB4TuQNkMEb6I+ND05sYHyE2V+zCG7amn6wvSL1LhD+kq58o8pn5cEqtZqhiRqmecZrqlULc4b+d2cDTQuyes48m1mV4bUOj1YAsubUU4p5WPUC/AP0C3Td6jqOKBClWRP4Cz52ShEtzXkRjzmjq1L4tVYzu9iakoNc5fZeZ+jdtszWBZYXWWPX9F//pZ/4XJ3mbgE+4dXdvTgbW3AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Console-image\"\n        title=\"Console-image\"\n        src=\"/blog/static/d9410614ccf7c4092e1c6327e65f9f10/2c288/firefox-console.png\"\n        srcset=\"/blog/static/d9410614ccf7c4092e1c6327e65f9f10/4dcb9/firefox-console.png 188w,\n/blog/static/d9410614ccf7c4092e1c6327e65f9f10/5ff7e/firefox-console.png 375w,\n/blog/static/d9410614ccf7c4092e1c6327e65f9f10/2c288/firefox-console.png 684w\"\n        sizes=\"(max-width: 684px) 100vw, 684px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 664px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/bdb44eb62ff2120aaca488c1ed8500fa/31493/firefox-application.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.574468085106384%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVQI1z2MOw6DMBBEuU+umpbzpMoVSINwhAPCP7AjR14bWRPYgmI0xbx5ze1u0T4M0ndFooKcC6x1MMailB3OrdDaXInxx9uyKObObJs/NgulNJpnH9HPAXIcGa618kHKD7wPh9BhmmaklECUEULAMAgWEhH3Key6F4R44w/Zo5UKAC8A6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Console-image\"\n        title=\"Console-image\"\n        src=\"/blog/static/bdb44eb62ff2120aaca488c1ed8500fa/31493/firefox-application.png\"\n        srcset=\"/blog/static/bdb44eb62ff2120aaca488c1ed8500fa/4dcb9/firefox-application.png 188w,\n/blog/static/bdb44eb62ff2120aaca488c1ed8500fa/5ff7e/firefox-application.png 375w,\n/blog/static/bdb44eb62ff2120aaca488c1ed8500fa/31493/firefox-application.png 664w\"\n        sizes=\"(max-width: 664px) 100vw, 664px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<hr>\n<p>To understand the <code>sameSite</code> attribute better, do watch <a href=\"https://www.youtube.com/watch?v=LjP-0d6-5Ew\">this</a> video. It contains practical examples of different values of the property.</p>\n<blockquote>\n<p><em><em>In the end, the internet became a much safer place</em></em></p>\n</blockquote>"}},"pageContext":{"slug":"what-is-same-site-attribute"}},"staticQueryHashes":["2199005656","3159585216"]}